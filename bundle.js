!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";var o={},a=document.querySelector(".app__snackbar"),c=null;o.show=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3;e&&(c&&c.remove(),c=document.createElement("div"),c.className="app__snackbar-msg",c.textContent=e,a.appendChild(c),setTimeout(function(){c.remove()},t))},t.snackbar=o},function(e,t,n){"use strict";var o=n(0),a={};a.active=!1,a.webcam=null,a.canvas=null,a.ctx=null,a.decoder=null,a.setCanvas=function(){a.canvas=document.createElement("canvas"),a.ctx=a.canvas.getContext("2d")},a.init=function(){function e(){a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight}function t(e){navigator.mediaDevices.getUserMedia(e).then(function(e){a.webcam.srcObject=e}).catch(function(e){console.log("Error occurred ",e),n()})}function n(){document.querySelector(".app__overlay").style.display="none",document.querySelector(".app__header-icon svg").style.fill="#212121",o.snackbar.show("Unable to open the camera, provide permission to access the camera",1e4)}var c=!1;
//!window.iOS
window.iOS?a.webcam=document.querySelector("img"):a.webcam=document.querySelector("video"),a.setCanvas(),a.decoder=new Worker("decoder.min.js"),a.webcam.addEventListener("play",function(t){c||(e(),c=!0)},!1),navigator.mediaDevices.enumerateDevices().then(function(e){var n=e.filter(function(e){if(e.label.split(",")[1],"videoinput"==e.kind)return e});if(n.length>1){var o={video:{mandatory:{sourceId:n[1].deviceId?n[1].deviceId:null}},audio:!1};t(o)}else if(n.length){var o={video:{mandatory:{sourceId:n[0].deviceId?n[0].deviceId:null}},audio:!1};t(o)}else t({video:!0})}).catch(function(e){n(),console.error("Error occurred : ",e)})},a.scan=function(e){function t(t){if(t.data.length>0){var o=t.data[0][2];a.active=!1,e(o)}setTimeout(n,0)}function n(){if(a.active)try{a.ctx.drawImage(a.webcam,0,0,a.canvas.width,a.canvas.height);var e=a.ctx.getImageData(0,0,a.canvas.width,a.canvas.height);e.data&&a.decoder.postMessage(e)}catch(e){"NS_ERROR_NOT_AVAILABLE"==e.name&&setTimeout(n,0)}}a.active=!0,a.setCanvas(),a.decoder.onmessage=t,n()},e.exports=a},function(e,t){},function(e,t){function n(e){return o.test(e)}e.exports=n;var o=/^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/},function(e,t){function n(){return"serviceWorker"in navigator&&(window.fetch||"imageRendering"in document.documentElement.style)&&("https:"===window.location.protocol||"localhost"===window.location.hostname||0===window.location.hostname.indexOf("127."))}function o(e){e||(e={}),n()&&navigator.serviceWorker.register("/sw.js")}function a(e,t){}function c(){n()&&navigator.serviceWorker.getRegistration().then(function(e){if(e)return e.update()})}t.install=o,t.applyUpdate=a,t.update=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n(1),c=o(a),r=n(0),i=n(2),l=(o(i),n(3)),s=o(l);"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){localStorage.getItem("offline")||(localStorage.setItem("offline",!0),r.snackbar.show("App is ready for offline usage.",5e3))}),n(4).install(),window.addEventListener("DOMContentLoaded",function(){function e(){window.appOverlay.style.borderStyle="solid",w.style.display="block"}function t(){d=document.createElement("img"),d.src="",d.id="frame"}function n(){k.style.background="red",S="Workshop"}function o(){console.log("Result: ",l),window.open(l,"_blank","toolbar=0,location=0,menubar=0"),l=null,r()}function a(){y.style.display="block",c.default.scan(function(e){var t,n,o=[];l=e,o=e.split(/(?:,| )+/),n=o[0],t=2==o.length?o[1]:o[2],b="https://maker.ifttt.com/trigger/conf/with/key/bTiXpE3XeLKopMXqjIaaZK?value1="+n+"&value2="+t,g.value=e,g.select(),y.style.display="none",(0,s.default)(e)&&(f.style.display="inline-block"),p.classList.remove("app__dialog--hide"),v.classList.remove("app__dialog--hide")})}function r(){l=null;var e=new XMLHttpRequest;e.open("POST",b,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send(),g.value="",b="",S="",window.iOS&&(d.src="",d.className=""),p.classList.add("app__dialog--hide"),v.classList.add("app__dialog--hide"),a()}function i(){_&&_.remove();var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("capture","camera"),e.id="camera",w.textContent="",w.style.color="#212121",w.style.bottom="-60px",h.style.fill="#212121",window.appOverlay.style.borderStyle="",u.style.color="#212121",u.style.display="block",t();var n=document.querySelector(".app__layout-content");n.appendChild(e),n.appendChild(d),u.addEventListener("click",function(){y.style.display="none",document.querySelector("#camera").click()}),e.addEventListener("change",function(e){e.target&&e.target.files.length>0&&(d.className="app__overlay",d.src=URL.createObjectURL(e.target.files[0]),y.style.display="block",window.appOverlay.style.borderColor="#212121",a())})}var l=null,d=null,u=document.querySelector(".app__select-photos"),p=document.querySelector(".app__dialog"),v=document.querySelector(".app__dialog-overlay"),f=document.querySelector(".app__dialog-open"),m=document.querySelector(".app__dialog-close"),y=document.querySelector(".custom-scanner"),g=document.querySelector("#result"),w=document.querySelector(".app__help-text"),h=document.querySelector(".app__header-icon svg"),_=document.querySelector("video"),b=null,S=null,k=document.querySelector(".workshop"),q=document.querySelector(".session");window.appOverlay=document.querySelector(".app__overlay"),window.addEventListener("load",function(t){c.default.init(),setTimeout(function(){e(),a()},1e3)}),m.addEventListener("click",r,!1),f.addEventListener("click",o,!1),k.addEventListener("click",n,!1),q.addEventListener("click",session,!1),window.iOS&&i()})}]);